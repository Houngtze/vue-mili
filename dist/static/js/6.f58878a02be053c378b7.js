webpackJsonp([6],{"Qr+7":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("oSxK"),s=a("KgXo"),n=a("I4Fq"),r=a("n5Qe"),o=a("L/hj"),l=a("IcnI"),c={data:function(){return{l_show:!1,id:"",type:"",detail:"",InvestVal:"",agreeCheck:!1}},components:{loading:s.a,topBar:i.a},created:function(){},computed:{investIncome:function(){if(this.detail)return this.detail.yearrate=Number(this.detail.yearrate),this.detail.range=Number(this.detail.range),this.detail.income=1e4*Math.pow(1+this.detail.yearrate/1200,this.detail.range)-1e4,this.detail.income=this.detail.income.toFixed(2),this.detail.income},now:function(){return o.a.getNowFormatDate()},investCaninvest:function(){if(this.detail)return this.detail.caninvest=(parseInt(this.detail.amout)-parseInt(this.detail.already_invest)).toFixed(0)},inverEnd:function(){var t,e,a=new Date(this.now.replace(".","-").replace(".","-"));return a=a.setDate(a.getDate()+parseInt(this.detail.range)),t=(a=new Date(a)).getMonth()+1,a.getMonth()<10&&(t="0"+(a.getMonth()+1)),e=a.getDate(),a.getDate()<10&&(e="0"+a.getDate()),a.getFullYear()+"."+t+"."+e},userAccount:function(){var t=JSON.parse(l.a.state.userAcount);return t.total}},methods:{add:function(){var t=Number(this.detail.amount_min);this.InvestVal=Number(this.InvestVal)+t,this.InvestVal=this.InvestVal.toFixed(2)},reduce:function(){var t=Number(this.detail.amount_min);if(this.InvestVal=Number(this.InvestVal),this.InvestVal<=t)return this.InvestVal=t,this.InvestVal=this.InvestVal.toFixed(2),!1;this.InvestVal=this.InvestVal-t,this.InvestVal=this.InvestVal.toFixed(2)},sumbitInvest:function(){var t=this;if(!this.agreeCheck)return o.a.toast("请详细阅读相关协议"),!1;this.l_show=!0;var e="sxb"==this.type?r.a.url_investCasualStore:r.a.url_investStoreTreasure;console.log(this.id),console.log(this.InvestVal),n.a.post(e,{invest_id:this.id,money:this.InvestVal,user_coupon_id:"0",action:"new",tend_id:"0"}).then(function(e){console.log(e);var a=e.data;t.l_show=!1,0==a.errcode?(o.a.toast("您已完成此类型理财产品的投资"),n.a.get(r.a.url_user_account).then(function(t){console.log(t.data.data),t.data.data&&l.a.dispatch("UserAccount",t.data.data)}),setTimeOut(function(){this.$router.replace({name:"myInvest",query:{type:this.type}})},2e3)):o.a.toast("投资产品出错，请稍后重试")})},noOpen:function(){o.a.toast("优惠券功能暂未开放，请移至APP使用")}},beforeRouteEnter:function(t,e,a){a(function(e){e.l_show=!0,e.id=t.query.id,e.type=t.query.type;var a="sxb"==t.query.type?r.a.url_casualStoreDetail:r.a.url_intStoreDetail;n.a.post(a,{invest_id:t.query.id}).then(function(t){var a=t.data;e.l_show=!1,0==a.errcode?(console.log(a),e.detail=a.data,e.InvestVal=a.data.amount_min):(o.a.toast("投资产品不存在"),e.detail="")})})}},d={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"m-content wrap",attrs:{id:"site-content"}},[i("loading",{attrs:{loadingShow:t.l_show}}),t._v(" "),i("topBar",{attrs:{title:"投资详情",backShow:!0}}),t._v(" "),i("div",{staticClass:"product-item"},[i("div",{staticClass:"product-item-header"},[i("span",[t._v("■")]),t._v(" "),i("span",{staticClass:" product-item-title",attrs:{id:"investName"}},[t._v(t._s(t.detail.name))]),t._v(" "),i("span",[t._v("■")])]),t._v(" "),"sxb"==t.type?i("div",{staticClass:"product-item-data"},[i("div",{staticClass:"product-item-data-detail"},[i("div",{staticClass:"left"},[i("h3",{attrs:{id:"investDays"}},[t._v(t._s(t.detail.range))]),t._v(" "),i("p",[t._v("项目期限(天)")])]),t._v(" "),i("div",{staticClass:"middle"},[i("h3",{staticClass:"color-ff6459",attrs:{id:"investCaninvest"}},[t._v(t._s(t.investCaninvest))]),t._v(" "),i("p",[t._v("可投金额(元)")])]),t._v(" "),i("div",{staticClass:"right"},[i("h3",{attrs:{id:"investMin"}},[t._v(t._s(t.detail.amount_min))]),t._v(" "),i("p",[t._v("起投金额(元)")])])])]):t._e(),t._v(" "),"zcb"==t.type?i("div",{staticClass:"product-item-data"},[i("div",{staticClass:"product-item-data-detail"},[i("div",{staticClass:"left"},[i("h3",{attrs:{id:"investRange"}},[t._v(t._s(t.detail.range))]),t._v(" "),i("p",[t._v("项目期限(月)")])]),t._v(" "),i("div",{staticClass:"middle"},[i("h3",{staticClass:"color-ff6459",attrs:{id:"investIncome"}},[t._v(t._s(t.investIncome))]),t._v(" "),i("p",[t._v("万元预期收益(元)")])]),t._v(" "),i("div",{staticClass:"right"},[i("h3",{attrs:{id:"investMin"}},[t._v(t._s(t.detail.amount_min))]),t._v(" "),i("p",[t._v("起投金额(元)")])])])]):t._e()]),t._v(" "),i("div",{staticClass:"product-money"},[i("div",{staticClass:"m-flex-box"},[i("p",{staticClass:"product-money-title flex-1"},[t._v("账户余额："),i("span",{attrs:{id:"account"}},[t._v(t._s(t.userAccount))])]),t._v(" "),t._m(0)]),t._v(" "),i("div",{staticClass:"product-money-content m-flex-box"},[i("div",{staticClass:"left",attrs:{id:"moneyReduce"},on:{click:t.reduce}},[i("img",{attrs:{src:a("zT5e"),alt:"-"}})]),t._v(" "),i("div",{staticClass:"middle"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.InvestVal,expression:"InvestVal"}],staticClass:"color-ff6459",attrs:{type:"number",name:"",id:"num",placeholder:"",onkeyup:"this.value=parseInt(this.value.replace(/^(\\-)*(\\d+)\\.(\\d\\d).*$/,'$1$2.$3'));if(isNaN(value))execCommand('undo');",oninput:"this.value=parseInt(this.value.replace(/^(\\-)*(\\d+)\\.(\\d\\d).*$/,'$1$2.$3'));if(isNaN(value))execCommand('undo');",readonly:"",unselectable:"on",onfocus:"this.blur()"},domProps:{value:t.InvestVal},on:{input:function(e){e.target.composing||(t.InvestVal=e.target.value)}}})]),t._v(" "),i("div",{staticClass:"right",attrs:{id:"moneyAdd"},on:{click:t.add}},[i("img",{attrs:{src:a("mCww"),alt:"+"}})])]),t._v(" "),i("p",{staticClass:"text"},[t._v("起投金额："),i("span",{attrs:{id:"startMoney"}},[t._v(t._s(t.detail.amount_min))]),t._v("元起投，以"),i("span",{attrs:{id:"unit"}},[t._v(t._s(t.detail.amount_min))]),t._v("元的倍数递增。")])]),t._v(" "),i("div",{staticClass:"m-personal-list3 m-product-item"},[t._m(1),t._v(" "),i("div",{staticClass:"m-item m-item2",attrs:{id:"useCoupon"},on:{click:t.noOpen}},[t._m(2),t._v(" "),i("span",[t._v("优惠券")])])]),t._v(" "),i("div",{staticClass:"m-bar-footer m-flex-box product-detail-button",attrs:{id:"nav"}},[i("div",{staticClass:"up-line m-check"},[i("label",{attrs:{id:"check"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.agreeCheck,expression:"agreeCheck"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.agreeCheck)?t._i(t.agreeCheck,null)>-1:t.agreeCheck},on:{change:function(e){var a=t.agreeCheck,i=e.target,s=!!i.checked;if(Array.isArray(a)){var n=t._i(a,null);i.checked?n<0&&(t.agreeCheck=a.concat([null])):n>-1&&(t.agreeCheck=a.slice(0,n).concat(a.slice(n+1)))}else t.agreeCheck=s}}}),i("i")]),t._v(" "),t._m(3)]),t._v(" "),i("input",{attrs:{type:"hidden",id:"couponData"}}),t._v(" "),i("input",{attrs:{type:"hidden",id:"hongbao"}}),t._v(" "),i("input",{attrs:{type:"hidden",id:"jiaxi"}}),t._v(" "),i("input",{attrs:{type:"hidden",id:"xutou"}}),t._v(" "),i("a",{staticClass:"right",attrs:{tapmode:"active",id:"nowInvest"},on:{click:t.sumbitInvest}},[t._v("立即投资")])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"product-money-info"},[this._v("预期收益："),e("span",{attrs:{id:"futureMoney"}},[this._v("-")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"m-item m-item2",attrs:{onclick:""}},[e("div",{staticClass:"m-pull-right"},[e("span",{attrs:{id:"repaytype"}},[this._v("到期返还本息")])]),this._v(" "),e("span",[this._v("回款方式")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"m-pull-right m-flex-box"},[e("span",{staticClass:"color-ff6459",attrs:{id:"coupon"}}),this._v(" "),e("span",{staticClass:"iconfont"},[this._v("")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",[this._v("同意并阅读 "),e("a",{staticClass:"color-27a0ff",attrs:{href:"#",onclick:"openWin('agreement', {title : '相关协议', url : 'products/agreement.html'})"}},[this._v("《相关协议》")])])}]};var v=a("VU/8")(c,d,!1,function(t){a("su+u")},"data-v-10113a1d",null);e.default=v.exports},mCww:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAABeUlEQVR4Xu2YsQqDMBRFn6uLIA6Co/7/7E/4B67i4uKig0NLO7XF1pL7WhRPwM2E5OTkhryoruuL0d4SiAD02Q4AbZweAAFIC1gMwiAM0ghgkMaPDMIgDNIIYJDGjwzCIAzSCGCQxo8MOoJBcRzb7Xts4zjasiza9jv03oVBZVlaVVVPy2maxoZhcFiiNgSAjnDEMGhjlwAEIC0IMQiDMEgjgEEaPzIIgzBII4BBGr9TZNBayeJbbHmeW1EUT7+3bWu3kkdI8yyVuL3m1ywIWZxHH89SCYD+Ve7AoICbyOO4hIyxyyOWZZklSRKyHkvT9P49tq7rbJ7noPH6vrdpmoL6vnZyyyBlNqe45gGkEAjIL88cUabOEfvXNa/sEhnEEVP8McMgDMIgjQAGafzIIAzCII0ABmn81kolniULZXa7eIspC/h1XwAd4bH6awuU8TEIgxR/zDAIgzBII4BBGj8yCIMwSCOAQRo/MgiDMEgjgEEaPzJog98VgNfHUL56cS4AAAAASUVORK5CYII="},"su+u":function(t,e){},zT5e:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAABK0lEQVR4Xu3cMYqDUABF0R9BBDtx/0uzdQUiiGiGSRGmycjwRGQ4gRQp8vncHF+ZxzAMz+L1scBDoN91vAPt+87RjwJVVb0+CfSBhUAHz4tAAmWTShBBBGUFCMr62SCCCMoKEJT1s0EEEZQVICjrZ4MIIigrQFDWzwYRRFBWgKCsnw0iiKCsAEFZPxtEEEFZgSsF1XVdvt93eC3LUrZti69y6gZ1XVf6vo8vdcYB4ziWeZ7jowS68hEj6KC2QAeB2rYtTdPEz/0ZB0zTVNZ1jY86dYPi29zwAIGuHOkbAoivRBBBGSKCCCIoK0BQ1s8GEURQVoCgrJ8NIoigrABBWT8bRBBBWQGCsn42iCCCsgIEZf1sEEEEZQUIyvrZoL8Kynr/32/7F7yD3/YL1zLyiIhfOPAAAAAASUVORK5CYII="}});
//# sourceMappingURL=6.f58878a02be053c378b7.js.map